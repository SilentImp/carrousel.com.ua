var __bind=function(t,i){return function(){return t.apply(i,arguments)}};define(["jquery.scrollTo/jquery.scrollTo.min"],function(){var t;return t=function(){function t(t){this.widget=t,this.prev=__bind(this.prev,this),this.next=__bind(this.next,this),this.scrollToScreen=__bind(this.scrollToScreen,this),this.init_slider=__bind(this.init_slider,this),this.reinit=__bind(this.reinit,this),this.addToCard=__bind(this.addToCard,this),0!==this.widget.length&&(this.itype="click",$("html").hasClass("touch")&&(this.itype="touchstart"),this.wrapper=this.widget.find(".item-slider-wrapper"),this.items=this.wrapper.find(".item"),this.card=$("body>header>nav .card b"),this.items.find(".buy").on(this.itype,this.addToCard),this.nav=this.widget.find(".slider-navigation"),this.next_button=this.nav.find(".slider-navigation-next"),this.prev_button=this.nav.find(".slider-navigation-prev"),this.current=0,this.time=600,this.init_slider(),this.next_button.on(this.itype,this.next),this.prev_button.on(this.itype,this.prev),this.reinit_timer=null,$(window).on("resize",this.reinit))}return t.prototype.addToCard=function(t){var i;return t.preventDefault(),i=this.card.text(),i=i.substr(1,i.length-2),i=parseInt(i,10),isNaN(i)&&(i=0),i++,this.card.text("("+i+")")},t.prototype.reinit=function(){return null!==this.reinit_timer&&window.clearTimeout(this.reinit_timer),this.reinit_timer=window.setTimeout(this.init_slider,250)},t.prototype.init_slider=function(){var t,i,e,s,r,n,h,o,c,d,p;for(this.screen_width=this.wrapper.width(),this.onscreen=Math.floor(this.screen_width/300),this.screens=Math.ceil(this.items.length/this.onscreen),this.time=300*this.onscreen,this.wrapper.find(".cloned").remove(),e=[],i=[],t=s=0,o=this.onscreen;o>=0?o>s:s>o;t=o>=0?++s:--s)e.push($(this.items[t]).clone(!0));for(t=r=0,c=this.onscreen;c>=0?c>r:r>c;t=c>=0?++r:--r)i.push($(this.items[this.items.length-this.onscreen+t]).clone(!0));for(t=n=0,d=this.onscreen;d>=0?d>n:n>d;t=d>=0?++n:--n)this.wrapper.append(e[t]),this.wrapper.find(".item:last-child").addClass("cloned");for(t=h=0,p=this.onscreen;p>=0?p>h:h>p;t=p>=0?++h:--h)this.wrapper.prepend(i[t]),this.wrapper.find(".item:first-child").addClass("cloned");return this.wrapper.scrollTo(this.wrapper.find(".item:eq("+this.onscreen+")"),0),this.current>=this.screens&&(this.current=this.screens-1),this.onscreen>=this.items.length?this.nav.fadeOut():this.nav.fadeIn(),this.current=0,this.scrollToScreen()},t.prototype.scrollToScreen=function(){return this.wrapper.scrollTo({top:0,left:this.current*(this.screen_width+50)+(this.screen_width+50)},this.time)},t.prototype.next=function(t){return t.preventDefault(),this.current++,this.current>this.screens&&(this.wrapper.scrollTo(this.wrapper.find(".item:eq("+this.onscreen+")"),0),this.current=1),this.scrollToScreen()},t.prototype.prev=function(t){return t.preventDefault(),this.current--,this.current<0&&(this.wrapper.scrollTo(this.wrapper.find(".item:last"),0),this.current=this.screens-1),this.scrollToScreen()},t}()});