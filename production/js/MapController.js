var __bind=function(t,o){return function(){return t.apply(o,arguments)}};define([],function(){var t;return t=function(){function t(){this.initFooterMap=__bind(this.initFooterMap,this),this.jsonLoaded=__bind(this.jsonLoaded,this),this.getPlaceBody=__bind(this.getPlaceBody,this),this.initContactsMap=__bind(this.initContactsMap,this),this.init=__bind(this.init,this),this.itype="click",$("html").hasClass("touch")&&(this.itype="touchstart"),this.footerMap=null,ymaps.ready(this.init)}return t.prototype.init=function(){return this.footerMap=document.getElementById("footer-map"),null!==this.footerMap&&this.initFooterMap(),this.contactsMap=document.getElementById("contacts-map"),null!==this.contactsMap?this.initContactsMap():void 0},t.prototype.initContactsMap=function(){return $.getJSON(this.contactsMap.getAttribute("data-json"),{},this.jsonLoaded)},t.prototype.getPlaceBody=function(t){var o,a,e,n,i,s,l,r,p,c,h,m,u;if(e="",t.cell.length>0)for(h=t.cell,i=0,r=h.length;r>i;i++)n=h[i],e+='<p class="tel">моб. <a href="tel:'+n+'">'+n+"</a></p>";if(t.tel.length>0)for(m=t.tel,s=0,p=m.length;p>s;s++)n=m[s],e+='<p class="tel">тел. <a href="tel:'+n+'">'+n+"</a></p>";if(t.email.length>0){for(a=[],u=t.email,l=0,c=u.length;c>l;l++)o=u[l],a.push('<a href="mailto:'+o+'">'+o+"</a>");e+='<p class="email">'+a.join(", ")+"</p>"}return e+='<p class="adr">'+t.adr+"</p>"},t.prototype.jsonLoaded=function(t){var o,a,e,n,i,s,l,r,p,c,h,m,u,g;for(this.json=t.address,l=[null,null],o=[null,null],m=this.json,r=0,c=m.length;c>r;r++)i=m[r],e=[i.pos.lng,i.pos.lat],s={balloonContentHeader:i.title,balloonContentBody:this.getPlaceBody(i),balloonAutoPan:!0,balloonAutoPanCheckZoomRange:!0},n={iconLayout:"default#image",iconImageHref:"images/map/marker-2.png",iconImageSize:[48,57],iconImageOffset:[-20,-57],hasBalloon:!0,openBalloonOnClick:!0,openEmptyBalloon:!0},i.central===!0&&(a=e,n.iconImageHref="images/map/marker.png",n.iconImageSize=[53,88],n.iconImageOffset=[-25,-88]),i.marker=new ymaps.Placemark(e,s,n),(l[0]<i.pos.lng||null===l[0])&&(l[0]=i.pos.lng),(l[1]<i.pos.lat||null===l[1])&&(l[1]=i.pos.lat),(o[0]>i.pos.lng||null===o[0])&&(o[0]=i.pos.lng),(o[1]>i.pos.lat||null===o[1])&&(o[1]=i.pos.lat);for(l[0]+=.02,l[1]+=.02,o[0]-=.01,o[1]-=.01,this.contactsMap=new ymaps.Map("contacts-map",{bounds:[o,l],zoom:14}),this.contactsMap.behaviors.disable("scrollZoom"),u=this.json,g=[],p=0,h=u.length;h>p;p++)i=u[p],g.push(this.contactsMap.geoObjects.add(i.marker));return g},t.prototype.initFooterMap=function(){var t,o,a;return a=[this.footerMap.getAttribute("data-lng"),this.footerMap.getAttribute("data-lat")],t=new ymaps.Map("footer-map",{center:a,zoom:16}),o=new ymaps.Placemark(a,{},{iconLayout:"default#image",iconImageHref:"images/map/marker.png",iconImageSize:[53,88],iconImageOffset:[-25,-88]}),t.behaviors.disable("scrollZoom"),t.geoObjects.add(o)},t}()});