var __bind=function(t,o){return function(){return t.apply(o,arguments)}};define(["viewport-units-buggyfill/viewport-units-buggyfill"],function(t){var o;return o=function(){function o(){this.initFooterMap=__bind(this.initFooterMap,this),this.jsonLoaded=__bind(this.jsonLoaded,this),this.getPlaceBody=__bind(this.getPlaceBody,this),this.initContactsMap=__bind(this.initContactsMap,this),this.init=__bind(this.init,this),t.init(),this.itype="click",$("html").hasClass("touch")&&(this.itype="touchstart"),navigator.userAgent.match(/i(Pad|Phone|Pod).+(Version\/7\.\d+ Mobile)/i)&&$(".yammy-map .map").css("height",.9*window.innerHeight),this.footerMap=null,ymaps.ready(this.init)}return o.prototype.init=function(){return this.footerMap=document.getElementById("footer-map"),null!==this.footerMap&&this.initFooterMap(),this.contactsMap=document.getElementById("contacts-map"),null!==this.contactsMap?this.initContactsMap():void 0},o.prototype.initContactsMap=function(){return $.getJSON(this.contactsMap.getAttribute("data-json"),{},this.jsonLoaded)},o.prototype.getPlaceBody=function(t){var o,e,n,a,i,s,l,r,p,c,h,m,g;if(n="",t.cell.length>0)for(h=t.cell,i=0,r=h.length;r>i;i++)a=h[i],n+='<p class="tel">моб. <a href="tel:'+a+'">'+a+"</a></p>";if(t.tel.length>0)for(m=t.tel,s=0,p=m.length;p>s;s++)a=m[s],n+='<p class="tel">тел. <a href="tel:'+a+'">'+a+"</a></p>";if(t.email.length>0){for(e=[],g=t.email,l=0,c=g.length;c>l;l++)o=g[l],e.push('<a href="mailto:'+o+'">'+o+"</a>");n+='<p class="email">'+e.join(", ")+"</p>"}return n+='<p class="adr">'+t.adr+"</p>"},o.prototype.jsonLoaded=function(t){var o,e,n,a,i,s,l,r,p,c,h,m,g,u;for(this.json=t.address,l=[null,null],o=[null,null],m=this.json,r=0,c=m.length;c>r;r++)i=m[r],n=[i.pos.lng,i.pos.lat],s={balloonContentHeader:i.title,balloonContentBody:this.getPlaceBody(i),balloonAutoPan:!0,balloonAutoPanCheckZoomRange:!0},a={iconLayout:"default#image",iconImageHref:"images/map/marker-2.png",iconImageSize:[48,57],iconImageOffset:[-20,-57],hasBalloon:!0,openBalloonOnClick:!0,openEmptyBalloon:!0},i.central===!0&&(e=n,a.iconImageHref="images/map/marker.png",a.iconImageSize=[53,88],a.iconImageOffset=[-25,-88]),i.marker=new ymaps.Placemark(n,s,a),(l[0]<i.pos.lng||null===l[0])&&(l[0]=i.pos.lng),(l[1]<i.pos.lat||null===l[1])&&(l[1]=i.pos.lat),(o[0]>i.pos.lng||null===o[0])&&(o[0]=i.pos.lng),(o[1]>i.pos.lat||null===o[1])&&(o[1]=i.pos.lat);for(l[0]+=.02,l[1]+=.02,o[0]-=.01,o[1]-=.01,this.contactsMap=new ymaps.Map("contacts-map",{bounds:[o,l],zoom:14}),this.contactsMap.behaviors.disable("scrollZoom"),g=this.json,u=[],p=0,h=g.length;h>p;p++)i=g[p],u.push(this.contactsMap.geoObjects.add(i.marker));return u},o.prototype.initFooterMap=function(){var t,o,e;return e=[this.footerMap.getAttribute("data-lng"),this.footerMap.getAttribute("data-lat")],t=new ymaps.Map("footer-map",{center:e,zoom:16}),o=new ymaps.Placemark(e,{},{iconLayout:"default#image",iconImageHref:"images/map/marker.png",iconImageSize:[53,88],iconImageOffset:[-25,-88]}),t.behaviors.disable("scrollZoom"),t.geoObjects.add(o)},o}()});